<!--Refer to https://github.com/iamisti/mdDataTable-->
<h2>User List</h2>
<div layout-margin>
    <md-card >
        <md-subheader>Filter by search</md-subheader>

        <md-input-container style="margin:15px;">
            <label>Search</label>
            <input type="text" ng-model="filterName">
        </md-input-container>

        <div ng-hide="true">
            {{(filteredItems = (userList.users | filter: filterName))}}
        </div>
    </md-card>
    <md-button class="md-raised md-primary" ui-sref="root.usercreate" >Add a user</md-button>

    <mdt-table table-card="{visible: true, title: 'All Users'}"
               alternate-headers="'contextual'"
               sortable-columns="true" animate-sort-icon="true" paginated-rows="{isEnabled: true, rowsPerPageValues: [5,10,20,100]}"
               selectable-rows="true"
               mdt-row="{'data': filteredItems,

                      'table-row-id-key': 'id',
                      'column-keys': ['id','firstName', 'lastName', 'email', 'mobilephoneNumber', 'address', 'position', 'role', 'option']}"
               delete-row-callback="userList.deleteRowCallback(rows)">
        <mdt-header-row>
            <mdt-column align-rule="left">Id</mdt-column>
            <mdt-column align-rule="right">firstName</mdt-column>
            <mdt-column align-rule="right">lastName</mdt-column>
            <mdt-column align-rule="right">Email</mdt-column>
            <mdt-column align-rule="right">Mobile Phone</mdt-column>
            <mdt-column align-rule="right">Address</mdt-column>
            <mdt-column align-rule="right">Position</mdt-column>
            <mdt-column align-rule="right">Role</mdt-column>
            <mdt-column align-rule="right"><span></span><i class="material-icons">add</i></mdt-column>
        </mdt-header-row>

        <mdt-custom-cell column-key="id" html-content="true">
             <a ui-sref="root.usermodify({userId:value})">{{value}}</a>
        </mdt-custom-cell>
    </mdt-table>

    <table st-table="userList.users" class="table table-striped" >
        <thead>
        <tr>
            <th st-sort="firstName">first name</th>
            <th st-sort="lastName">last name</th>
            <th st-sort="birthDate">birth date</th>
            <th st-sort="balance" st-skip-natural="true" >balance</th>
            <th>email</th>
        </tr>
        <tr>
            <th colspan="5"><input st-search="" class="form-control" placeholder="global search ..." type="text"/></th>
        </tr>
        </thead>
        <tbody>
        <tr st-select-row="row" st-select-mode="multiple" ng-repeat="row in userList.users">
            <td>{{row.firstName}}</td>
            <td>{{row.lastName}}</td>
            <td>{{row.birthDate}}</td>
            <td>{{row.balance}}</td>
            <td>{{row.email}}</td>
        </tr>
        </tbody>
        <tfoot>
        <tr>
            <td colspan="5" class="text-center">
                <div st-pagination="" st-items-by-page="2" st-displayed-pages="7"></div>
            </td>
        </tr>
        </tfoot>
    </table>
</div>


<div>

<ul ng-repeat="user in userList.users">
    <li>
        <a ui-sref="root.mainpanel.userdelete({userId:{{user.id}}})">Delete</a></li>
</ul>

</div>